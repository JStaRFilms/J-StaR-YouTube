---
description: Prime the agent with project coding guidelines, styling rules, and folder structure.
---
# Workflow: Prime Agent

**System Instruction:**
You are loading the "brain" of this project — the coding guidelines, styling rules, and architectural decisions that govern how we work.

This workflow is for when you (or the user) wants to ensure the agent is fully primed with project context before starting work.

---

## Usage

```
User: "Use /prime_agent" (loads everything)
User: "/prime_agent styling" (loads styling-specific context)
User: "/prime_agent coding" (loads coding guidelines only)
```

---

## Steps

### 1. Load Core Documentation

Read the foundational documents by auto-detecting paths:

```bash
# Coding Guidelines (The Law) — try common locations
cat docs/coding_guidelines.md 2>/dev/null || \
cat docs/Coding_Guidelines.md 2>/dev/null || \
cat CODING_GUIDELINES.md 2>/dev/null

# Styling Guide — auto-detect (could be any of these)
cat docs/Styling*.md 2>/dev/null || \
cat docs/styling*.md 2>/dev/null || \
cat docs/design/*.md 2>/dev/null

# Project-Specific Styling Addendum (if exists)
cat docs/Styling-Addendum.md 2>/dev/null || \
cat docs/styling-addendum.md 2>/dev/null
```

### 2. Check for UI Mockups & Design System

```bash
# List available mockups (the source of truth for UI implementation)
ls docs/mockups/ 2>/dev/null || ls docs/design/mockups/ 2>/dev/null

# Check for design system HTML (generated by /init_vibecode_design)
ls docs/design/design-system.html 2>/dev/null || \
ls docs/design-system.html 2>/dev/null
```

> [!IMPORTANT]
> **If mockups exist**, they are the **UNQUESTIONABLE source of truth** for UI.
> Before implementing any page, check if a mockup exists at:
> - `docs/mockups/[page-name].html`
> - `docs/design/mockups/[page-name].html`
> 
> Replicate the mockup's layout, colors, and components exactly.

> [!TIP]
> The styling doc name varies by project. Common patterns:
> - `docs/Styling-in-Next-and-Tailwind-v4.md`
> - `docs/styling-guide.md`
> - `docs/design/design-system.md`
> - `docs/ui-guidelines.md`
> 
> The workflow will auto-detect any `Styling*.md` or `styling*.md` in `docs/`.

### 2. Extract Key Rules

**From Coding Guidelines — Internalize:**
- **Blueprint Protocol**: Plan before code, docs in `docs/features/`
- **200-Line Rule**: Refactor if exceeded
- **File Structure**: Feature-sliced design (`src/features/[Name]/`)
- **Server vs Client**: RSCs by default, `'use client'` sparingly
- **Service Pattern**: Route Handlers = controllers, Services = business logic
- **Validation**: Zod for all inputs

**From Styling Guide — Internalize:**
- **Tailwind v4**: CSS-first with `@theme` tokens
- **Core Tokens**: `--color-background`, `--color-foreground`, `--color-border`, `--color-ring`
- **Dark Mode**: `@theme .dark { }` overrides, `dark` class on `<html>`
- **Animations**: Define in CSS with `@keyframes`, use `.animate-*` classes

### 4. Acknowledge Context

**After loading, state aloud:**

"✅ **Agent Primed.** I have internalized:

**Coding Guidelines:**
- Blueprint Protocol: Plan → Approve → Build → Document
- 200-line component limit
- Feature-sliced architecture (`src/features/[Name]/`)
- Server Components default, Client sparingly
- Zod validation for all API inputs

**Styling Rules:**
- Tailwind v4 with `@theme` tokens
- Core tokens: background, foreground, border, ring
- Dark mode via `.dark` class + `@theme .dark { }`
- Utility-first, no custom CSS unless necessary

**UI Mockups:** [List any found, or 'None found']
- Before implementing UI, I will check `docs/mockups/` for templates

I will follow these rules. What would you like to build?"

---

## Optional: Generate Styling Addendum

If the project doesn't have `docs/Styling-Addendum.md`, offer to create one:

```
"I notice there's no project-specific Styling Addendum. Would you like me to generate one?
This will probe your repo for:
- Design tokens in globals.css
- Dark mode configuration
- Animation definitions
- File path map

Reply 'yes' to generate."
```

**If user says yes, follow these steps:**

1. **Probe the repository:**
   - Find `postcss.config.*` → verify `@tailwindcss/postcss` plugin
   - Find global CSS with `@import "tailwindcss"`
   - Find `@theme` tokens and dark overrides
   - List custom keyframes and animations

2. **Generate `docs/Styling-Addendum.md`:**
   ```markdown
   # Styling Addendum – [PROJECT_NAME] (Tailwind CSS v4)
   
   *Based on: [docs/Styling-in-Next-and-Tailwind-v4.md](file:///path/to/file)*
   
   ## 1. Project Entry Points
   - App entry: `src/app/layout.tsx`
   - Global CSS: `src/app/globals.css`
   
   ## 2. Tailwind v4 Setup
   - PostCSS: `postcss.config.mjs` with `@tailwindcss/postcss`
   - Global CSS imports: `@import "tailwindcss"`
   
   ## 3. Design Tokens
   [List all @theme tokens found]
   
   ## 4. Dark Mode Policy
   [Document how dark mode works in this project]
   
   ## 5. Animations
   [List custom keyframes and animation classes]
   
   ## 6. File Path Map
   | Purpose | Path |
   |---------|------|
   | Global CSS | `src/app/globals.css` |
   | PostCSS | `postcss.config.mjs` |
   | Tailwind Config | `tailwind.config.ts` |
   
   ## 7. Gotchas
   [Project-specific issues to watch for]
   ```

---

## Quick Reference Card

After priming, you can also generate a quick reference card:

```markdown
# [PROJECT_NAME] - Agent Quick Reference

## File Structure
```
src/
├── app/           # Next.js App Router pages
├── features/      # Feature-sliced modules
│   └── [Name]/    # Components, hooks, services for each feature
├── components/    
│   └── ui/        # Reusable UI components (Button, Card, etc.)
├── lib/           # Utilities, API clients
└── scripts/       # Build/automation scripts
```

## Key Commands
- `npm run dev` — Start development
- `npm run build` — Production build
- `npm run db:seed` — Seed database

## Style Tokens
- `bg-background` / `text-foreground` — Base colors
- `bg-primary` / `text-primary` — Brand colors
- `dark:` prefix for dark mode variants
```

---

## When to Use This Workflow

- **Start of session**: When you want the agent fully briefed
- **Before complex work**: When implementing features that touch styling + architecture
- **New agent onboarding**: When switching to a fresh chat session
- **After `/migrate`**: Supplement the migration snapshot with this priming
